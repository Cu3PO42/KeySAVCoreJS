language: node_js
node_js:
- '12'
sudo: false
script:
- yarn run build
- yarn run generate-documentation
- yarn run test
notifications:
  email: false
deploy:
  - provider: npm
    email: cu3po42@gmail.com
    api_key:
      secure: "tRRfhfZ50LYGmrgYxTu9x9joR/sPvY9rbmkFyTkTfYKX8X08BrSZZzrv7IY5Heu0GOSMXKNNo3Dr3ikknPGyRSH/cLHfsYQJSlh6y1Fy2DPun7ufNHE9oc/UNcAc6IrAfZvjF7209NnmXwE5g37YgDwxcm5q6Vl5ageYLBu0yYEU7yKuuHppdYTxzPtwrkYYmtrdjmFX0FLoHAgA/morjGoY+jBNw0rgDu7QuntLEkTgDUH1uX6k0QS7+zSiLXDXcuyGA0wEdYZPKBAyCHHNJ84Ygr8ZpA+ymA/+ROS737D7nb63xYVKdR4GLVKfSvpHKwAfglpmscB6ecj4oS1js6Es7zmaCpXwIA/lzymA5Bv9l5HushQbOV650BYwGv+DFwC9oCBUEbYsvikK+lKsjIIooDruCoMIVhW6VPJYyMsAASHBAvpkdLGxNKXVJN07PwrdHGhCYlygL6sncGRdzD5Hpn34jEluzI2AAbFLe0O9f9RqXv6mu4lUVNK2AAK+5Mc1w+uWQEZw5wD8DbG331Rjnoe0UwSlrUIDZI3WSpnFd4h21oT79vuXJnLGusfVkOrkAaO8WeNmsC3zV4uX2d2y8U76Isq2WM0aY8TlIofr0OtIWDsm2Fe5BRgcP1sAWmQHyStP7g9KghUS0HmvlYesnsXZHsz8whwiuYZDJEU="
    on:
      tags: true
      repo: Cu3PO42/KeySAVCoreJS
    skip_cleanup: true
  - provider: pages
    skip_cleanup: true
    on:
      branch: master
    local_dir: ./doc
    github_token: $GITHUB_TOKEN
before_install:
- openssl aes-256-cbc -K $encrypted_4281030c4abf_key -iv $encrypted_4281030c4abf_iv
  -in test/data.zip.enc -out test/data.zip -d
- unzip ./test/data.zip -d ./test
